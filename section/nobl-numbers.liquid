<div class="container-1400">
  <div class="nobl-top">
    
    <!-- Left Side -->
      <div class="nobl-left">
      {% if section.settings.heading %}
        <h2 class="font-32">{{ section.settings.heading }}</h2>
      {% endif %}

      {% for block in section.blocks %}
        {% if block.type == "stat" %}
          <div class="count-box">
            <div class="stat-number" data-target="{{ block.settings.percentage }}"></div>
            <div class="rte">{{ block.settings.text }}</div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Right Side -->
     <div class="nobl-right">

{% if section.settings.imagem %}
        <img class="hide-desk" src="{{ section.settings.imagem | image_url: width: 500 }}" alt="Stat Image" style="max-width: 100%; height: auto;" />
      {% endif %}
       
      {% if section.settings.image %}
        <img src="{{ section.settings.image | image_url: width: 800 }}" alt="Stat Image" style="max-width: 100%; height: auto;" />
      {% endif %}
    </div>

  </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const counters = document.querySelectorAll('.stat-number');

    const startCounter = (counter) => {
      const target = +counter.getAttribute('data-target');
      let count = 0;
      const speed = 20;

      const updateCount = () => {
        const increment = Math.ceil(target / 30);
        if (count < target) {
          count += increment;
          counter.innerText = count + "%";
          setTimeout(updateCount, speed);
        } else {
          counter.innerText = target + "%";
        }
      };
      updateCount();
    };

    const observer = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const counter = entry.target;
          if (!counter.classList.contains('counted')) {
            counter.classList.add('counted');
            startCounter(counter);
          }
        }
      });
    }, {
      threshold: 0.5 // Trigger when 50% visible
    });

    counters.forEach(counter => {
      observer.observe(counter);
    });
  });
</script>


{% schema %}
{
  "name": "NOBL By The Numbers",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "NOBL by the Numbers"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Right Image"
    },
    {
      "type": "image_picker",
      "id": "imagem",
      "label": "Right Image Mobile"
    }
  ],
  "blocks": [
    {
      "type": "stat",
      "name": "Stat Item",
      "settings": [
        {
          "type": "number",
          "id": "percentage",
          "label": "Percentage",
          "default": 91
        },
        {
          "type": "text",
          "id": "text",
          "label": "Supporting Text",
          "default": "of testers said NOBL made airport security noticeably faster"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "NOBL Stats",
      "category": "Custom"
    }
  ]
}
{% endschema %}
