<!-- FREE GIFT WITH DYNAMIC QUANTITY NUMBERS - USING CALCULATIONS SNIPPET -->
{% comment %}Gift Calculations Snippet - Shared logic for gift quantities and values{% endcomment %}
{% assign threshold_price = 10000 %}

{% comment %}Get gift IDs{% endcomment %}
{% assign gift_card_id = linklists.free-gift-card.links.first.object.variants.first.id %}
{% assign free_gift_id = linklists.free-gift.links.first.object.variants.first.id %}
{% assign gift_wrap_id = linklists.gift-wrapping.links.first.object.variants.first.id %}
{% assign dust_cover_id = linklists.free-gift-weekender.links.first.object.variants.first.id %}
{% assign duffel_dust_cover_id = linklists.free-gift-duffel.links.first.object.variants.first.id %}

{% comment %}Build lookup arrays for performance{% endcomment %}
{% assign excluded_product_ids = "52063818449196,52063818416428,52112601973036,52112601940268,52112601907500,52118054601004,52095063064876,52095063032108,52083547898156,52083547930924,51743045976364,51743045943596,51743045910828,51324488646956,51324480815404,51324475212076,51324451979564,51324436480300,51907215655212,51907215687980,51907215720748,51907215753516,51814372737324,51814372704556,51814372671788,51780627661100,51780627628332,51780627595564,51780627562796,51794430951724,51794430918956,51794402279724,51794402246956,51794590990636,51794591056172,51794591023404,51780541317420,51780541251884,51780541284652,51741528424748,51741528391980,51741528326444,51741528293676,51741528359212,51780535288108,51707337638188,51707337670956,51707337703724,51331478520108,51330588573996,51331478487340,51331478552876,51513585303852,51513585238316,51513585172780,51513585107244,51513584976172,51513585041708,51323755364652,51323770110252,51323784429868,51323870970156,51323796947244,51323816214828,51323831157036,51323831189804,51323839250732,51254464971052,51254465069356,51254465167660,51254465265964,51254465364268,51254465462572,51300674896172,51300674928940,51300674961708,51300674994476,49518344044844,49155034710316,47233335656748,50472143159596,50472143192364,50472143225132,50472143257900,50472143290668,50472143323436,50624775127340,50914676343084,48224037667116,50908171698476,50710331719980,50710331752748,50710331785516,50710331818284,50710331851052,51032366186796,51032366219564,51032366252332,51032366285100,51032366350636,51032366317868,51032372773164,51032372805932,51032372838700,51032372871468,51032372904236,51032372937004,51109622350124,51192592662828,51192592695596,51192592728364,51192592761132,51251464634668,51258974503212,51258974535980,51258974568748,51258974601516,51258974634284,51262648418604,51262648385836,51262648451372,51262648484140,50016635191596,51275810177324,51275810079020,51275810111788,51275810144556,51279143305516,51279143338284,51296341688620,51296359579948,51296378093868,51296397525292,51296408404268,51296422166828,51296432357676,51305756983596,51309766213932,51309766246700,51309766279468,51309766312236,51326989205804,51331478487340,51323831189804" | split: "," %}

{% assign gift_card_product_ids = "" %}
{% assign gift_wrapping_product_ids = "" %}

{% if settings.gift_card_products %}
  {% for product in settings.gift_card_products %}
    {% assign gift_card_product_ids = gift_card_product_ids | append: product.id | append: "," %}
  {% endfor %}
{% endif %}

{% if settings.gift_wrapping_products %}
  {% for product in settings.gift_wrapping_products %}
    {% assign gift_wrapping_product_ids = gift_wrapping_product_ids | append: product.id | append: "," %}
  {% endfor %}
{% endif %}

{% assign gift_card_product_ids = gift_card_product_ids | split: "," %}
{% assign gift_wrapping_product_ids = gift_wrapping_product_ids | split: "," %}

{% comment %}Build variant arrays{% endcomment %}
{% assign weekender_first_variant_ids = "" %}
{% if settings.weekender_dust_cover_products %}
  {% for product in settings.weekender_dust_cover_products %}
    {% for variant in product.variants %}
      {% if weekender_first_variant_ids == "" %}
        {% assign weekender_first_variant_ids = variant.id | append: "" %}
      {% else %}
        {% assign weekender_first_variant_ids = weekender_first_variant_ids | append: "," | append: variant.id %}
      {% endif %}
    {% endfor %}
  {% endfor %}
{% endif %}

{% if weekender_first_variant_ids != "" %}
  {% assign weekender_first_variant_ids = weekender_first_variant_ids | split: "," %}
{% else %}
  {% assign weekender_first_variant_ids = "" | split: "" %}
{% endif %}

{% assign weekender_only_variant_ids = "" %}
{% if settings.weekender_only_gift_products %}
  {% for product in settings.weekender_only_gift_products %}
    {% for variant in product.variants %}
      {% if weekender_only_variant_ids == "" %}
        {% assign weekender_only_variant_ids = variant.id | append: "" %}
      {% else %}
        {% assign weekender_only_variant_ids = weekender_only_variant_ids | append: "," | append: variant.id %}
      {% endif %}
    {% endfor %}
  {% endfor %}
{% endif %}

{% if weekender_only_variant_ids != "" %}
  {% assign weekender_only_variant_ids = weekender_only_variant_ids | split: "," %}
{% else %}
  {% assign weekender_only_variant_ids = "" | split: "" %}
{% endif %}

{% assign duffel_variant_ids = "" %}
{% if settings.duffel_dust_cover_products %}
  {% for product in settings.duffel_dust_cover_products %}
    {% for variant in product.variants %}
      {% if duffel_variant_ids == "" %}
        {% assign duffel_variant_ids = variant.id | append: "" %}
      {% else %}
        {% assign duffel_variant_ids = duffel_variant_ids | append: "," | append: variant.id %}
      {% endif %}
    {% endfor %}
  {% endfor %}
{% endif %}

{% if duffel_variant_ids != "" %}
  {% assign duffel_variant_ids = duffel_variant_ids | split: "," %}
{% else %}
  {% assign duffel_variant_ids = "" | split: "" %}
{% endif %}

{% assign full_set_variant_ids = "" %}
{% if settings.double_luggage_cover_products %}
  {% for product in settings.double_luggage_cover_products %}
    {% for variant in product.variants %}
      {% if full_set_variant_ids == "" %}
        {% assign full_set_variant_ids = variant.id | append: "" %}
      {% else %}
        {% assign full_set_variant_ids = full_set_variant_ids | append: "," | append: variant.id %}
      {% endif %}
    {% endfor %}
  {% endfor %}
{% endif %}

{% if full_set_variant_ids != "" %}
  {% assign full_set_variant_ids = full_set_variant_ids | split: "," %}
{% else %}
  {% assign full_set_variant_ids = "" | split: "" %}
{% endif %}

{% comment %}Initialize all counters{% endcomment %}
{% assign excluded_products_price = 0 %}
{% assign gift_card_in_cart = 0 %}
{% assign free_gift_in_cart = 0 %}
{% assign gift_wraps_in_cart = 0 %}
{% assign dust_cover_in_cart = 0 %}
{% assign duffel_dust_cover_in_cart = 0 %}
{% assign count_for_duffel = 0 %}
{% assign count_for_weekender = 0 %}
{% assign count_for_weekender_only = 0 %}
{% assign duffel_variant_in_cart = false %}
{% assign count_for_giftWrap = 0 %}
{% assign count_for_luggage_cover = 0 %}
{% assign full_set_count = 0 %}
{% assign gift_wrapping_count = 0 %}
{% assign weekender_first_variant_in_cart = false %}
{% assign weekender_only_variant_in_cart = false %}
{% assign gift_card_product_in_cart = false %}
{% assign gift_wrapping_product_in_cart = false %}

{% comment %}Process cart items{% endcomment %}
{% for item in cart.items %}
  {% assign item_id_str = item.id | append: "" %}
  {% assign variant_id_str = item.variant_id | append: "" %}
  {% assign item_product_id = item.product.id | append: "" %}
  
  {% comment %}Check excluded products{% endcomment %}
  {% if excluded_product_ids contains item_id_str %}
    {% assign excluded_products_price = excluded_products_price | plus: item.line_price %}
  
  {% comment %}Check free gift products{% endcomment %}
  {% elsif item.id == free_gift_id %}
    {% assign free_gift_in_cart = item.quantity %}
  {% elsif item.id == gift_wrap_id %}
    {% assign gift_wraps_in_cart = item.quantity %}
  {% elsif item.id == gift_card_id %}
    {% assign gift_card_in_cart = item.quantity %}
  {% elsif item.id == dust_cover_id %}
    {% assign dust_cover_in_cart = item.quantity %}
  {% elsif item.id == duffel_dust_cover_id %}
    {% assign duffel_dust_cover_in_cart = item.quantity %}
  {% else %}
    {% assign count_for_luggage_cover = count_for_luggage_cover | plus: item.quantity %}
    
    {% comment %}Check full set variants{% endcomment %}
    {% if full_set_variant_ids.size > 0 %}
      {% for variant_id in full_set_variant_ids %}
        {% assign variant_id_clean = variant_id | strip %}
        {% if variant_id_clean != "" and variant_id_clean == variant_id_str %}
          {% assign full_set_count = full_set_count | plus: item.quantity %}
          {% break %}
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endif %}
  
  {% comment %}Check weekender variants{% endcomment %}
  {% if weekender_first_variant_ids.size > 0 %}
    {% for variant_id in weekender_first_variant_ids %}
      {% assign variant_id_clean = variant_id | strip %}
      {% if variant_id_clean != "" and variant_id_clean == variant_id_str %}
        {% assign count_for_weekender = count_for_weekender | plus: item.quantity %}
        {% assign count_for_giftWrap = count_for_giftWrap | plus: item.quantity %}
        {% assign weekender_first_variant_in_cart = true %}
        {% break %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {% comment %}Check weekender-only variants{% endcomment %}
  {% if weekender_only_variant_ids.size > 0 %}
    {% for variant_id in weekender_only_variant_ids %}
      {% assign variant_id_clean = variant_id | strip %}
      {% if variant_id_clean != "" and variant_id_clean == variant_id_str %}
        {% assign count_for_weekender_only = count_for_weekender_only | plus: item.quantity %}
        {% assign weekender_only_variant_in_cart = true %}
        {% break %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {% comment %}Check duffel variants{% endcomment %}
  {% if duffel_variant_ids.size > 0 %}
    {% for variant_id in duffel_variant_ids %}
      {% assign variant_id_clean = variant_id | strip %}
      {% if variant_id_clean != "" and variant_id_clean == variant_id_str %}
        {% assign count_for_duffel = count_for_duffel | plus: item.quantity %}
        {% assign count_for_giftWrap = count_for_giftWrap | plus: item.quantity %}
        {% assign duffel_variant_in_cart = true %}
        {% break %}
      {% endif %}
    {% endfor %}
  {% endif %}
  
  {% comment %}Check gift card and gift wrapping products{% endcomment %}
  {% for gift_product_id in gift_card_product_ids %}
    {% assign gift_product_id_str = gift_product_id | strip %}
    {% if gift_product_id_str != "" and gift_product_id_str == item_product_id %}
      {% assign gift_card_product_in_cart = true %}
      {% break %}
    {% endif %}
  {% endfor %}
  
  {% for gift_product_id in gift_wrapping_product_ids %}
    {% assign gift_product_id_str = gift_product_id | strip %}
    {% if gift_product_id_str != "" and gift_product_id_str == item_product_id %}
      {% assign gift_wrapping_product_in_cart = true %}
      {% assign gift_wrapping_count = gift_wrapping_count | plus: item.quantity %}
      {% break %}
    {% endif %}
  {% endfor %}
{% endfor %}

{% comment %}Calculate expected quantities{% endcomment %}
{% assign adjusted_total_price = cart.total_price | minus: excluded_products_price %}
{% assign expected_luggage_cover_count = count_for_luggage_cover | plus: full_set_count %}

{% assign expected_gift_wrapping_count = 0 %}
{% assign expected_gift_card_count = 0 %}
{% assign expected_weekender_count = 0 %}
{% assign expected_duffel_count = 0 %}

{% if weekender_first_variant_in_cart %}
  {% assign expected_gift_card_count = 1 %}
  {% assign expected_gift_wrapping_count = count_for_giftWrap %}
  {% assign expected_weekender_count = count_for_weekender %}
{% endif %}

{% if weekender_only_variant_in_cart %}
  {% assign expected_weekender_count = expected_weekender_count | plus: count_for_weekender_only %}
{% endif %}

{% if duffel_variant_in_cart %}
  {% assign expected_gift_card_count = 1 %}
  {% assign expected_gift_wrapping_count = count_for_giftWrap %}
  {% assign expected_duffel_count = count_for_duffel %}
{% endif %}

{% assign triple_warranty_from_weekender_bundles = count_for_weekender_only | times: 1 %}

{% if gift_wrapping_product_in_cart %}
  {% assign expected_gift_wrapping_count = expected_gift_wrapping_count | plus: gift_wrapping_count | plus: full_set_count | plus: triple_warranty_from_weekender_bundles %}
{% endif %}

{% if gift_card_product_in_cart %}
  {% assign expected_gift_card_count = 1 %}
{% endif %}

{% comment %}Determine which gifts to show{% endcomment %}
{% assign show_luggage_cover = false %}
{% assign show_weekender_gift = false %}
{% assign show_duffel_gift = false %}
{% assign show_gift_card = false %}
{% assign show_gift_wrapping = false %}

{% if adjusted_total_price >= threshold_price or free_gift_in_cart > 0 %}
  {% assign show_luggage_cover = true %}
{% endif %}

{% if weekender_first_variant_in_cart or weekender_only_variant_in_cart or dust_cover_in_cart > 0 %}
  {% assign show_weekender_gift = true %}
{% endif %}

{% if duffel_variant_in_cart or duffel_dust_cover_in_cart > 0 %}
  {% assign show_duffel_gift = true %}
{% endif %}

{% if weekender_first_variant_in_cart or gift_card_product_in_cart or duffel_variant_in_cart or gift_card_in_cart > 0 %}
  {% assign show_gift_card = true %}
{% endif %}

{% if weekender_first_variant_in_cart or gift_wrapping_product_in_cart or duffel_variant_in_cart or gift_wraps_in_cart > 0 %}
  {% assign show_gift_wrapping = true %}
{% endif %}

{% comment %}Calculate display quantities{% endcomment %}
{% assign display_luggage_cover_qty = free_gift_in_cart %}
{% assign display_weekender_qty = dust_cover_in_cart %}
{% assign display_duffel_qty = duffel_dust_cover_in_cart %}
{% assign display_gift_card_qty = gift_card_in_cart %}
{% assign display_gift_wrapping_qty = gift_wraps_in_cart %}

{% if show_luggage_cover and display_luggage_cover_qty == 0 %}
  {% assign display_luggage_cover_qty = expected_luggage_cover_count %}
{% endif %}

{% if show_weekender_gift and display_weekender_qty == 0 %}
  {% assign display_weekender_qty = expected_weekender_count %}
{% endif %}

{% if show_duffel_gift and display_duffel_qty == 0 %}
  {% assign display_duffel_qty = expected_duffel_count %}
{% endif %}

{% if show_gift_card and display_gift_card_qty == 0 %}
  {% assign display_gift_card_qty = expected_gift_card_count %}
{% endif %}

{% if show_gift_wrapping and display_gift_wrapping_qty == 0 %}
  {% assign display_gift_wrapping_qty = expected_gift_wrapping_count %}
{% endif %}

{% comment %}Calculate totals - both actual and expected{% endcomment %}
{% assign total_gifts_in_cart = free_gift_in_cart | plus: gift_wraps_in_cart | plus: gift_card_in_cart | plus: dust_cover_in_cart | plus: duffel_dust_cover_in_cart %}

{% comment %}Calculate EXPECTED total gifts count{% endcomment %}
{% assign expected_total_gifts = 0 %}
{% if show_luggage_cover %}
  {% assign expected_total_gifts = expected_total_gifts | plus: display_luggage_cover_qty %}
{% endif %}
{% if show_weekender_gift %}
  {% assign expected_total_gifts = expected_total_gifts | plus: display_weekender_qty %}
{% endif %}
{% if show_duffel_gift %}
  {% assign expected_total_gifts = expected_total_gifts | plus: display_duffel_qty %}
{% endif %}
{% if show_gift_card %}
  {% assign expected_total_gifts = expected_total_gifts | plus: display_gift_card_qty %}
{% endif %}
{% if show_gift_wrapping %}
  {% assign expected_total_gifts = expected_total_gifts | plus: display_gift_wrapping_qty %}
{% endif %}

{% comment %}Get gift prices{% endcomment %}
{% assign luggagecover_price = 0 %}
{% assign giftcard_price = 0 %}
{% assign lifetime_warranty_price = 0 %}
{% assign dust_cover_price = 0 %}
{% assign duffel_dust_cover_price = 0 %}

{% if settings.use_static_prices %}
  {% assign luggagecover_price = settings.luggagecover_price %}
  {% assign giftcard_price = settings.giftcard_price %}
  {% assign lifetime_warranty_price = settings.lifetime_warranty_price %}
  {% assign dust_cover_price = settings.dust_cover_price %}
  {% assign duffel_dust_cover_price = settings.duffel_dust_cover_price %}
{% else %}
  {% assign luggagecover_product = all_products[settings.gift_one] %}
  {% assign giftcard_product = all_products[settings.gift_two] %}
  {% assign lifetime_warranty_product = all_products[settings.gift_three] %}
  {% assign dust_cover_product = all_products[settings.gift_four] %}
  {% assign duffel_dust_cover_product = all_products[settings.gift_five] %}
  
  {% if luggagecover_product != blank %}
    {% if luggagecover_product.price == 0 %}
      {% assign luggagecover_price = luggagecover_product.compare_at_price %}
    {% else %}
      {% assign luggagecover_price = luggagecover_product.price %}
    {% endif %}
  {% else %}
    {% assign luggagecover_price = settings.luggagecover_price %}
  {% endif %}

  {% if giftcard_product != blank %}
    {% if giftcard_product.price == 0 %}
      {% assign giftcard_price = giftcard_product.compare_at_price %}
    {% else %}
      {% assign giftcard_price = giftcard_product.price %}
    {% endif %}
  {% else %}
    {% assign giftcard_price = settings.giftcard_price %}
  {% endif %}

  {% if lifetime_warranty_product != blank %}
    {% if lifetime_warranty_product.price == 0 %}
      {% assign lifetime_warranty_price = lifetime_warranty_product.compare_at_price %}
    {% else %}
      {% assign lifetime_warranty_price = lifetime_warranty_product.price %}
    {% endif %}
  {% else %}
    {% assign lifetime_warranty_price = settings.lifetime_warranty_price %}
  {% endif %}

  {% if dust_cover_product != blank %}
    {% if dust_cover_product.price == 0 %}
      {% assign dust_cover_price = dust_cover_product.compare_at_price %}
    {% else %}
      {% assign dust_cover_price = dust_cover_product.price %}
    {% endif %}
  {% else %}
    {% assign dust_cover_price = settings.dust_cover_price %}
  {% endif %}

  {% if duffel_dust_cover_product != blank %}
    {% if duffel_dust_cover_product.price == 0 %}
      {% assign duffel_dust_cover_price = duffel_dust_cover_product.compare_at_price %}
    {% else %}
      {% assign duffel_dust_cover_price = duffel_dust_cover_product.price %}
    {% endif %}
  {% else %}
    {% assign duffel_dust_cover_price = settings.duffel_dust_cover_price %}
  {% endif %}
{% endif %}

{% comment %}Calculate ACTUAL gift value (only gifts in cart) - FIXED{% endcomment %}
{% assign actual_gift_value = 0 %}
{% if free_gift_in_cart > 0 %}
  {% assign luggage_total = luggagecover_price | times: free_gift_in_cart %}
  {% assign actual_gift_value = actual_gift_value | plus: luggage_total %}
{% endif %}
{% if gift_wraps_in_cart > 0 %}
  {% assign wrap_total = lifetime_warranty_price | times: gift_wraps_in_cart %}
  {% assign actual_gift_value = actual_gift_value | plus: wrap_total %}
{% endif %}
{% if gift_card_in_cart > 0 %}
  {% assign card_total = giftcard_price | times: gift_card_in_cart %}
  {% assign actual_gift_value = actual_gift_value | plus: card_total %}
{% endif %}
{% if dust_cover_in_cart > 0 %}
  {% assign dust_total = dust_cover_price | times: dust_cover_in_cart %}
  {% assign actual_gift_value = actual_gift_value | plus: dust_total %}
{% endif %}
{% if duffel_dust_cover_in_cart > 0 %}
  {% assign duffel_total = duffel_dust_cover_price | times: duffel_dust_cover_in_cart %}
  {% assign actual_gift_value = actual_gift_value | plus: duffel_total %}
{% endif %}

{% comment %}Calculate EXPECTED gift value (all eligible gifts) - FIXED{% endcomment %}
{% assign expected_gift_value = 0 %}
{% if show_luggage_cover %}
  {% assign expected_luggage_total = luggagecover_price | times: display_luggage_cover_qty %}
  {% assign expected_gift_value = expected_gift_value | plus: expected_luggage_total %}
{% endif %}
{% if show_weekender_gift %}
  {% assign expected_weekender_total = dust_cover_price | times: display_weekender_qty %}
  {% assign expected_gift_value = expected_gift_value | plus: expected_weekender_total %}
{% endif %}
{% if show_duffel_gift %}
  {% assign expected_duffel_total = duffel_dust_cover_price | times: display_duffel_qty %}
  {% assign expected_gift_value = expected_gift_value | plus: expected_duffel_total %}
{% endif %}
{% if show_gift_card %}
  {% assign expected_card_total = giftcard_price | times: display_gift_card_qty %}
  {% assign expected_gift_value = expected_gift_value | plus: expected_card_total %}
{% endif %}
{% if show_gift_wrapping %}
  {% assign expected_wrap_total = lifetime_warranty_price | times: display_gift_wrapping_qty %}
  {% assign expected_gift_value = expected_gift_value | plus: expected_wrap_total %}
{% endif %}

{% if free_shipping_enabled == true %}
  {% assign actual_gift_value = actual_gift_value | plus: shipping_price %}
  {% assign expected_gift_value = expected_gift_value | plus: shipping_price %}
{% endif %}

{% comment %}Determine final display values{% endcomment %}
{% assign display_total_gifts = total_gifts_in_cart %}
{% assign display_gift_value = actual_gift_value %}

{% comment %}If no actual gifts but eligible gifts exist, show expected values{% endcomment %}
{% if total_gifts_in_cart == 0 and expected_total_gifts > 0 %}
  {% assign display_total_gifts = expected_total_gifts %}
  {% assign display_gift_value = expected_gift_value %}
{% endif %}

{% comment %}Show gift section if there are gifts or eligibility{% endcomment %}
{% assign show_gift_section = false %}
{% if total_gifts_in_cart > 0 or show_luggage_cover or show_weekender_gift or show_duffel_gift or show_gift_card or show_gift_wrapping %}
  {% assign show_gift_section = true %}
{% endif %}

{% if show_gift_section %}
<div class="cart__free-gift--outer {{display_gift_value}}">
  <div class="cart__free-gift--header {{lifetime_warranty_price}}">
    {% if settings.cart_gift_icon %}
      <img src="{{  settings.cart_gift_icon | img_url : 'master' }}" alt="party popper icon"> 
    {% endif %}
    
    {% comment %}Always show count and value when there are eligible gifts{% endcomment %}
    {% if display_total_gifts > 0 %}
      {% if display_total_gifts == 1 %}
        1 Free Gift
      {% else %}
        {{ display_total_gifts }} Free Gifts
      {% endif %}
      - <span class="gift--value--total">
        {% if settings.use_static_prices %}
          ${{ display_gift_value }}
        {% else %}
          {{ display_gift_value | money | replace: '.00', '' }}
        {% endif %}
      </span> Value
    {% else %}
      Free Gifts Available!
    {% endif %}
  </div>

  {% comment %}Show luggage cover{% endcomment %}
  {% if show_luggage_cover %}
    <div class="cart__free-gift free-gift-in_cart first--gift-card {% if free_gift_in_cart == 0 %}potential-gift{% endif %}">
      <div class="cart__free-gift--items">
        <div class="cart__free-gift--item">
          {% if settings.luggage_cover_image %}
            <img src="{{ settings.luggage_cover_image | img_url : 'master' }}" alt="Nobl Luggage Cover">
          {% endif %}
          <div class="free-gift__item-info">
            <div class="free-gift__item--title">{{ settings.luggage_cover_text }}</div>
            {% if display_luggage_cover_qty > 0 %}
              <span class="free-gift__quantity-badge" style="font-weight: 600 !important;">{{ display_luggage_cover_qty }}</span>
            {% endif %}
            <div class="free-gift__item--price text-subdued">
              <span class="price line-through">
                {% if settings.use_static_prices %}
                  ${{ luggagecover_price }}
                {% else %}
                  {% if luggagecover_product != blank %}
                    {{ luggagecover_price | money | replace: '.00', ''}}
                  {% else %}
                    ${{ luggagecover_price }}
                  {% endif %}
                {% endif %}
              </span>
              <span>FREE</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  {% comment %}Show weekender dust cover{% endcomment %}
  {% if show_weekender_gift %}
    <div class="cart__free-gift free-gift-in_cart {% if free_gift_in_cart == 0 and dust_cover_in_cart > 0 %}first--gift-card{% endif %} {% if dust_cover_in_cart == 0 %}potential-gift{% endif %}">
      <div class="cart__free-gift--items">
        <div class="cart__free-gift--item">
          {% if settings.dust_cover_image %}
            <img src="{{ settings.dust_cover_image | img_url : 'master' }}" alt="Nobl Dust Cover">
          {% endif %}
          <div class="free-gift__item-info">
            <div class="free-gift__item--title">{{ settings.dust_cover_text }}</div>
            {% if display_weekender_qty > 0 %}
              <span class="free-gift__quantity-badge" style="font-weight: 600 !important;">{{ display_weekender_qty }}</span>
            {% endif %}
            <div class="free-gift__item--price text-subdued">
              <span class="price line-through">
                {% if settings.use_static_prices %}
                  ${{ dust_cover_price }}
                {% else %}
                  {% if dust_cover_product != blank %}
                    {{ dust_cover_price | money | replace: '.00', ''}}
                  {% else %}
                    ${{ dust_cover_price }}
                  {% endif %}
                {% endif %}
              </span>
              <span>FREE</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  {% comment %}Show duffel dust cover{% endcomment %}
  {% if show_duffel_gift %}
    <div class="cart__free-gift free-gift-in_cart {% if free_gift_in_cart == 0 and dust_cover_in_cart == 0 and duffel_dust_cover_in_cart > 0 %}first--gift-card{% endif %} {% if duffel_dust_cover_in_cart == 0 %}potential-gift{% endif %}">
      <div class="cart__free-gift--items">
        <div class="cart__free-gift--item">
          {% if settings.duffel_dust_cover_image %}
            <img src="{{ settings.duffel_dust_cover_image | img_url : 'master' }}" alt="Nobl Duffel Cover">
          {% endif %}
          <div class="free-gift__item-info">
            <div class="free-gift__item--title">{{ settings.duffel_dust_cover_text }}</div>
            {% if display_duffel_qty > 0 %}
              <span class="free-gift__quantity-badge" style="font-weight: 600 !important;">{{ display_duffel_qty }}</span>
            {% endif %}
            <div class="free-gift__item--price text-subdued">
              <span class="price line-through">
                {% if settings.use_static_prices %}
                  ${{ duffel_dust_cover_price }}
                {% else %}
                  {% if duffel_dust_cover_product != blank %}
                    {{ duffel_dust_cover_price | money | replace: '.00', ''}}
                  {% else %}
                    ${{ duffel_dust_cover_price }}
                  {% endif %}
                {% endif %}
              </span>
              <span>FREE</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  {% comment %}Show gift card{% endcomment %}
  {% if show_gift_card %}
    <div class="cart__free-gift gift-card-in_cart {% if free_gift_in_cart == 0 and dust_cover_in_cart == 0 and duffel_dust_cover_in_cart == 0 and gift_card_in_cart > 0 %}first--gift-card{% endif %} {% if gift_card_in_cart == 0 %}potential-gift{% endif %}">
      <div class="cart__free-gift--items">
        <div class="cart__free-gift--item gift--card_image">
          {% if settings.gift_card_image %}
            <img src="{{ settings.gift_card_image | img_url : 'master' }}" alt="nobl gift card">
          {% endif %}
          <div class="free-gift__item-info">
            <div class="free-gift__item--title">
              {% if settings.use_static_prices %}
                ${{ giftcard_price }}
              {% else %}
                {% if giftcard_product != blank %}
                  {{ giftcard_price | money | replace: '.00', ''}}
                {% else %}
                  ${{ giftcard_price }}
                {% endif %}
              {% endif %} {{ settings.gift_card_text }}
            </div>
            {% if display_gift_card_qty > 0 %}
              <span class="free-gift__quantity-badge" style="font-weight: 600 !important;">{{ display_gift_card_qty }}</span>
            {% endif %}
            <div class="free-gift__item--price text-subdued">
              <span class="price line-through">
                {% if settings.use_static_prices %}
                  ${{ giftcard_price }}
                {% else %}
                  {% if giftcard_product != blank %}
                    {{ giftcard_price | money | replace: '.00', ''}}
                  {% else %}
                    ${{ giftcard_price }}
                  {% endif %}
                {% endif %}
              </span>
              <span>FREE</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  {% comment %}Show gift wrapping{% endcomment %}
  {% if show_gift_wrapping %}
    <div class="cart__free-gift gift-wraps-in_cart {% if free_gift_in_cart == 0 and gift_card_in_cart == 0 and dust_cover_in_cart == 0 and duffel_dust_cover_in_cart == 0 and gift_wraps_in_cart > 0 %}first--gift-card{% endif %} {% if gift_wraps_in_cart == 0 %}potential-gift{% endif %}">
      <div class="cart__free-gift--items">
        <div class="cart__free-gift--item gift--card_image">
          {% if settings.lifetime_warranty_image %}
            <img src="{{ settings.lifetime_warranty_image | img_url : 'master' }}" alt="Nobl Package Protection">
          {% endif %}
          <div class="free-gift__item-info">
            <div class="free-gift__item--title">{{ settings.lifetime_warranty_text }}</div>
            {% if display_gift_wrapping_qty > 0 %}
              <span class="free-gift__quantity-badge" style="font-weight: 600 !important;">{{ display_gift_wrapping_qty }}</span>
            {% endif %}
            <div class="free-gift__item--price text-subdued">
              <span class="price line-through">
                {% if settings.use_static_prices %}
                  ${{ lifetime_warranty_price }}
                {% else %}
                  {% if lifetime_warranty_product != blank %}
                    {{ lifetime_warranty_price | money | replace: '.00', ''}}
                  {% else %}
                    ${{ lifetime_warranty_price }}
                  {% endif %}
                {% endif %}
              </span>
              <span>FREE</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  {% endif %}
</div>
{% endif %}