{% if block.settings.subheading != blank or block.settings.heading != blank or block.settings.content != blank %}
  <div class="section-header justify-self-{{ block.settings.text_alignment | default: 'center' }} block.settings.text-{{ text_alignment | default: 'center' }}">
    {%- if block.settings.subheading != blank or block.settings.heading != blank or block.settings.content != blank -%}
      <div class="prose">
        {%- if block.settings.subheading != blank -%}
          <p class="h6">{{- block.settings.subheading -}}</p>
        {%- endif -%}

        {%- if block.settings.heading != blank -%}
          <h2 class="h2">{{- block.settings.heading -}}</h2>
        {%- endif -%}
      </div>
    {%- endif -%}
  </div>
{%- endif -%}

<!-- DESKTOP LAYOUT -->

<x-tabs class="content-tabs {% if block.settings.text_alignment == 'center' %}content-tabs--center{% endif %} hidden sm:block">
  <template shadowrootmode="open">
    <slot role="tablist" part="tab-list" name="title" style="gap: 1.5rem !important;border-block-end: none !important;"></slot>
    <slot part="tab-panel-list" name="content"></slot>
  </template>

  {%- assign title = block.settings.title | default: block.settings.page.title -%}
  {%- assign content = block.settings.page.content | default: block.settings.content -%}

  {% for block in section.blocks %}
    {%- if block.settings.title1 != blank and block.settings.content1 != blank -%}
      <button class="h6" type="button" role="tab" slot="title" {{ block.shopify_attributes }}>{{ block.settings.title1 }}</button>

      <div role="tabpanel" slot="content" {% cycle '', 'hidden', 'hidden', 'hidden', 'hidden' %}>
        <div class="prose">
          {{- block.settings.content1 -}}
        </div>
      </div>

      <div slot="accordion-tab">
        {%- render 'accordion', title: block.settings.title1, content: block.settings.content1, open: block.settings.open_on_mobile -%}
      </div>
    {%- endif -%}

    {%- if block.settings.title2 != blank and block.settings.content2 != blank -%}
      <button class="h6" type="button" role="tab" slot="title" {{ block.shopify_attributes }}>{{ block.settings.title2 }}</button>

      <div role="tabpanel" slot="content" {% cycle '', 'hidden', 'hidden', 'hidden', 'hidden' %}>
        <div class="prose">
          {{- block.settings.content2 -}}
        </div>
      </div>

    <div slot="accordion-tab">
      {%- render 'accordion', title: block.settings.title2, content: block.settings.content2, open: block.settings.open_on_mobile -%}
    </div>
  {%- endif -%}


  {%- if block.settings.title3 != blank and block.settings.content3 != blank -%}
    <button class="h6" type="button" role="tab" slot="title" {{ block.shopify_attributes }}>{{ block.settings.title3 }}</button>

    <div role="tabpanel" slot="content" {% cycle '', 'hidden', 'hidden', 'hidden', 'hidden' %}>
      <div class="prose">
        {{- block.settings.content3 -}}
      </div>
    </div>

    <div slot="accordion-tab">
      {%- render 'accordion', title: block.settings.title3, content: block.settings.content3, open: block.settings.open_on_mobile -%}
    </div>
  {%- endif -%}

  {%- if block.settings.title4 != blank and block.settings.content4 != blank -%}
    <button class="h6" type="button" role="tab" slot="title" {{ block.shopify_attributes }}>{{ block.settings.title4 }}</button>

      <div role="tabpanel" slot="content" {% cycle '', 'hidden', 'hidden', 'hidden', 'hidden' %}>
        <div class="prose">
          {{- block.settings.content4 -}}
        </div>
      </div>

      <div slot="accordion-tab">
        {%- render 'accordion', title: block.settings.title4, content: block.settings.content4, open: block.settings.open_on_mobile -%}
      </div>
    {%- endif -%}

    {%- if block.settings.title5 != blank and block.settings.content5 != blank -%}
      <button class="h6" type="button" role="tab" slot="title" {{ block.shopify_attributes }}>{{ block.settings.title5 }}</button>

      <div role="tabpanel" slot="content" {% cycle '', 'hidden', 'hidden', 'hidden', 'hidden' %}>
        <div class="prose">
          {{- block.settings.content5 -}}
        </div>
      </div>

      <div slot="accordion-tab">
        {%- render 'accordion', title: block.settings.title5, content: block.settings.content5, open: block.settings.open_on_mobile -%}
      </div>
    {%- endif -%}
  {% endfor %}
</x-tabs>

<!-- MOBILE LAYOUT -->

<div class="accordion-group sm:hidden">
  {%- for block in section.blocks -%}

    {%- if block.settings.title1 != blank and block.settings.content1 != blank -%}
      {%- render 'accordion', title: block.settings.title1, content: block.settings.content1, open: block.settings.open_on_mobile -%}
    {%- endif -%}

    {%- if block.settings.title2 != blank and block.settings.content2 != blank -%}
      {%- render 'accordion', title: block.settings.title2, content: block.settings.content2 -%}
    {%- endif -%}

    {%- if block.settings.title3 != blank and block.settings.content3 != blank -%}
      {%- render 'accordion', title: block.settings.title3, content: block.settings.content3 -%}
    {%- endif -%}

    {%- if block.settings.title4 != blank and block.settings.content4 != blank -%}
      {%- render 'accordion', title: block.settings.title4, content: block.settings.content4 -%}
    {%- endif -%}

    {%- if block.settings.title5 != blank and block.settings.content5 != blank -%}
      {%- render 'accordion', title: block.settings.title5, content: block.settings.content5 -%}
    {%- endif -%}
  {%- endfor -%}
</div>